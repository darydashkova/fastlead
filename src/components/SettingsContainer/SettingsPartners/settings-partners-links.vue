<template>
        <tr class="settings-partners-links__table_row">
            <td class="settings-partners-links__table_row-cell">{{partner.url_name}}</td>
            <td class="settings-partners-links__table_row-cell">{{tableCells.link+partner.url}}</td>
            <td class="settings-partners-links__table_row-cell">{{partner.clicks}}</td>
            <td class="settings-partners-links__table_row-buttons">
                <button class="settings-partners-link__table_row-button" type="button" @click="copyLink(partner.url)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 13.3333H3.33333C2.4496 13.3323 1.60237 12.9807 0.97748 12.3559C0.352588 11.731 0.00105857 10.8837 0 10L0 3.33333C0.00105857 2.4496 0.352588 1.60237 0.97748 0.97748C1.60237 0.352588 2.4496 0.00105857 3.33333 0L10 0C10.8837 0.00105857 11.731 0.352588 12.3559 0.97748C12.9807 1.60237 13.3323 2.4496 13.3333 3.33333V10C13.3323 10.8837 12.9807 11.731 12.3559 12.3559C11.731 12.9807 10.8837 13.3323 10 13.3333ZM3.33333 1.33333C2.8029 1.33333 2.29419 1.54405 1.91912 1.91912C1.54405 2.29419 1.33333 2.8029 1.33333 3.33333V10C1.33333 10.5304 1.54405 11.0391 1.91912 11.4142C2.29419 11.7893 2.8029 12 3.33333 12H10C10.5304 12 11.0391 11.7893 11.4142 11.4142C11.7893 11.0391 12 10.5304 12 10V3.33333C12 2.8029 11.7893 2.29419 11.4142 1.91912C11.0391 1.54405 10.5304 1.33333 10 1.33333H3.33333ZM16 12.6667V4C16 3.82319 15.9298 3.65362 15.8047 3.5286C15.6797 3.40357 15.5101 3.33333 15.3333 3.33333C15.1565 3.33333 14.987 3.40357 14.8619 3.5286C14.7369 3.65362 14.6667 3.82319 14.6667 4V12.6667C14.6667 13.1971 14.456 13.7058 14.0809 14.0809C13.7058 14.456 13.1971 14.6667 12.6667 14.6667H4C3.82319 14.6667 3.65362 14.7369 3.5286 14.8619C3.40357 14.987 3.33333 15.1565 3.33333 15.3333C3.33333 15.5101 3.40357 15.6797 3.5286 15.8047C3.65362 15.9298 3.82319 16 4 16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667Z" fill="#CFCFE4"/>
                    </svg>
                </button>
                <button class="settings-partners-link__table_row-button" type="button" @click="openModalChange(partner.affiliate_id)" >
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.8619 6.18126C14.9869 6.05623 15.1565 5.986 15.3333 5.986C15.5101 5.986 15.6797 6.05623 15.8047 6.18126C15.9298 6.30628 16 6.47585 16 6.65266V10.8953C16.0011 11.3332 15.9153 11.7669 15.7477 12.1715C15.58 12.576 15.3338 12.9432 15.0233 13.252L13.2527 15.024C12.9438 15.3344 12.5764 15.5806 12.1717 15.7481C11.7671 15.9156 11.3333 16.0012 10.8953 16H3.33333C2.4496 15.9989 1.60237 15.6474 0.977479 15.0225C0.352588 14.3976 0.00105857 13.5504 0 12.6667V3.33333C0.00105857 2.4496 0.352588 1.60237 0.977479 0.977479C1.60237 0.352588 2.4496 0.00105857 3.33333 0H9.36133C9.53814 0 9.70771 0.0702379 9.83273 0.195262C9.95776 0.320286 10.028 0.489855 10.028 0.666666C10.028 0.843477 9.95776 1.01305 9.83273 1.13807C9.70771 1.26309 9.53814 1.33333 9.36133 1.33333H3.33333C2.8029 1.33333 2.29419 1.54405 1.91912 1.91912C1.54405 2.29419 1.33333 2.8029 1.33333 3.33333V12.6667C1.33333 13.1971 1.54405 13.7058 1.91912 14.0809C2.29419 14.4559 2.8029 14.6667 3.33333 14.6667H9.99999V12C9.99999 11.4696 10.2107 10.9609 10.5858 10.5858C10.9609 10.2107 11.4696 9.99999 12 9.99999H14.6667V6.65266C14.6667 6.47585 14.7369 6.30628 14.8619 6.18126ZM11.3333 14.6147C11.7031 14.5337 12.042 14.3487 12.31 14.0813L14.0833 12.3093C14.3493 12.0406 14.5342 11.7023 14.6167 11.3333H12C11.8232 11.3333 11.6536 11.4036 11.5286 11.5286C11.4036 11.6536 11.3333 11.8232 11.3333 12V14.6147ZM4.30761 8.74848L12.4356 0.620482C12.8318 0.241744 13.3588 0.0303819 13.9069 0.0303819C14.4551 0.0303819 14.9821 0.241744 15.3783 0.620482C15.7679 1.01103 15.9867 1.54016 15.9867 2.09181C15.9867 2.64346 15.7679 3.17259 15.3783 3.56315L7.25028 11.6911C6.94151 12.0016 6.57424 12.2477 6.16971 12.4152C5.76519 12.5827 5.33145 12.6684 4.89361 12.6671H3.99828C3.82147 12.6671 3.6519 12.5969 3.52687 12.4719C3.40185 12.3469 3.33161 12.1773 3.33161 12.0005V11.1051C3.33037 10.6673 3.416 10.2336 3.58353 9.82904C3.75106 9.42451 3.99717 9.05724 4.30761 8.74848ZM6.30761 10.7485L14.4356 2.62048C14.5756 2.48014 14.6542 2.29002 14.6542 2.09181C14.6542 1.89361 14.5756 1.70349 14.4356 1.56315C14.2932 1.42712 14.1039 1.35121 13.9069 1.35121C13.71 1.35121 13.5207 1.42712 13.3783 1.56315L5.25028 9.69114C4.87665 10.0671 4.66633 10.5751 4.66494 11.1051V11.3338H4.89361C5.42361 11.3324 5.93169 11.1221 6.30761 10.7485Z" fill="#CFCFE4"/>
                    </svg>
                </button>
                <button class="settings-partners-link__table_row-button" type="button" @click="deleteLink">
                    <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M13.3 2.66667H11.13C10.9675 1.91428 10.5377 1.23823 9.91288 0.752479C9.28808 0.266727 8.50654 0.000969683 7.7 0H6.3C5.49346 0.000969683 4.71192 0.266727 4.08712 0.752479C3.46233 1.23823 3.03247 1.91428 2.87 2.66667H0.7C0.514348 2.66667 0.336301 2.7369 0.205025 2.86193C0.0737498 2.98695 0 3.15652 0 3.33333C0 3.51014 0.0737498 3.67971 0.205025 3.80474C0.336301 3.92976 0.514348 4 0.7 4H1.4V12.6667C1.40111 13.5504 1.77022 14.3976 2.42635 15.0225C3.08249 15.6474 3.97208 15.9989 4.9 16H9.1C10.0279 15.9989 10.9175 15.6474 11.5736 15.0225C12.2298 14.3976 12.5989 13.5504 12.6 12.6667V4H13.3C13.4857 4 13.6637 3.92976 13.795 3.80474C13.9263 3.67971 14 3.51014 14 3.33333C14 3.15652 13.9263 2.98695 13.795 2.86193C13.6637 2.7369 13.4857 2.66667 13.3 2.66667ZM6.3 1.33333H7.7C8.13419 1.33384 8.55759 1.46225 8.91213 1.70096C9.26667 1.93967 9.53499 2.27699 9.6803 2.66667H4.3197C4.46501 2.27699 4.73333 1.93967 5.08787 1.70096C5.44241 1.46225 5.86581 1.33384 6.3 1.33333ZM11.2 12.6667C11.2 13.1971 10.9788 13.7058 10.5849 14.0809C10.1911 14.456 9.65695 14.6667 9.1 14.6667H4.9C4.34305 14.6667 3.8089 14.456 3.41508 14.0809C3.02125 13.7058 2.8 13.1971 2.8 12.6667V4H11.2V12.6667ZM5.60289 11.9999C5.78854 11.9999 5.96658 11.9297 6.09786 11.8047C6.22913 11.6797 6.30288 11.5101 6.30288 11.3333V7.33329C6.30288 7.15648 6.22913 6.98691 6.09786 6.86189C5.96658 6.73686 5.78854 6.66663 5.60289 6.66663C5.41723 6.66663 5.23919 6.73686 5.10791 6.86189C4.97664 6.98691 4.90289 7.15648 4.90289 7.33329V11.3333C4.90289 11.5101 4.97664 11.6797 5.10791 11.8047C5.23919 11.9297 5.41723 11.9999 5.60289 11.9999ZM8.8942 11.8047C8.76292 11.9297 8.58488 11.9999 8.39922 11.9999C8.21357 11.9999 8.03552 11.9297 7.90425 11.8047C7.77297 11.6797 7.69922 11.5101 7.69922 11.3333V7.33329C7.69922 7.15648 7.77297 6.98691 7.90425 6.86189C8.03552 6.73686 8.21357 6.66663 8.39922 6.66663C8.58488 6.66663 8.76292 6.73686 8.8942 6.86189C9.02548 6.98691 9.09923 7.15648 9.09923 7.33329V11.3333C9.09923 11.5101 9.02548 11.6797 8.8942 11.8047Z" fill="#EB5757"/>
                    </svg>
                </button>
            </td>
        </tr>
</template>

<script>
import { ref, onUpdated, onMounted } from 'vue'
import { usePartners } from "@/composition/usePartners";
export default {
    props: {
        partner: Object,
    },
    emits:["deleteLink"],
    setup(props, {emit}){

        const {partners, returnPartners, getPartners, deletePartners, getSinglePartners} = usePartners()

        const tableCells = ref(
        {link: "https://fastlead.app?referral="},
        )

        const openModalChange = (id) => {
            emit('openModalChange');
            getSinglePartners(id)
        }

        const deleteLink = () => {
            emit('deleteLink', props.partner.affiliate_id);
        }

        const copy = ref("")

        const link = (url) => {
                copy.value = tableCells.value.link + url
        }

        const copyLink = (url) => {
            link(url)
            try {
                navigator.clipboard.writeText(copy.value)
            } catch (e) {
                throw e
            }
        }

        onUpdated(() => {
            /* link(url) */
        })

        return{
            tableCells,

            openModalChange,
            partners,
            returnPartners,

            deleteLink,
            copyLink,

            copy,
            link,
        }
    }
}
</script>

<style lang="scss" src="./settings-partners-links.scss"></style>